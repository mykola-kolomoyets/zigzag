{"ast":null,"code":"var _jsxFileName = \"/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/src/views/login/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport AuthService from '../../api/services/auth';\nimport Button from '../../components/button';\nimport Input from '../../components/input';\nimport AppContext from '../../store/context/app';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const emailRef = useRef(null);\n  const PasswordRef = useRef(null);\n  const {\n    data: {\n      isLoading\n    },\n    setData: setAppData\n  } = AppContext.useContext();\n  const navigate = useNavigate();\n\n  const onSubmit = event => {\n    if (event) event.preventDefault();\n    const [email, password] = [emailRef, PasswordRef].map(ref => {\n      var _ref$current;\n\n      return (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.value;\n    });\n    setAppData({\n      isLoading: true\n    });\n    AuthService.login({\n      email: email,\n      password: password\n    }).then(res => {\n      const {\n        token,\n        user\n      } = res.data;\n      setAppData({\n        user,\n        token\n      });\n      localStorage.setItem('userId', user._id);\n      localStorage.setItem('AuthToken', token);\n    }).then(() => navigate('/main')).catch(err => {\n      console.log(err);\n    }).finally(() => setAppData({\n      isLoading: false\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"login__contaner\",\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"login__content\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          name: \"email\",\n          placeholder: \"Enter email\",\n          ref: emailRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"password\",\n          placeholder: \"Enter password\",\n          ref: PasswordRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          disabled: isLoading,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        children: [\"Not registered?\\xA0\", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"lg2nlQmuqtISbUBCjY/nkqphBbs=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/src/views/login/index.tsx"],"names":["React","useRef","Link","useNavigate","AuthService","Button","Input","AppContext","Login","emailRef","PasswordRef","data","isLoading","setData","setAppData","useContext","navigate","onSubmit","event","preventDefault","email","password","map","ref","current","value","login","then","res","token","user","localStorage","setItem","_id","catch","err","console","log","finally"],"mappings":"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","sourcesContent":["import React, { FormEvent, useRef, VFC } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport AuthService from '../../api/services/auth';\nimport Button from '../../components/button';\nimport Input from '../../components/input';\nimport AppContext from '../../store/context/app';\n\nconst Login: VFC = () => {\n  const emailRef = useRef<HTMLInputElement>(null);\n  const PasswordRef = useRef<HTMLInputElement>(null);\n\n  const { data: { isLoading }, setData: setAppData } = AppContext.useContext();\n\n  const navigate = useNavigate();\n\n  const onSubmit = (event: FormEvent) => {\n    if (event) event.preventDefault();\n\n    const [\n      email,\n      password\n    ] = [emailRef, PasswordRef].map(ref => ref.current?.value);\n\n    setAppData({ isLoading: true });\n\n    AuthService.login({\n      email: email!,\n      password: password!\n    })\n    .then(res => {\n      const { token, user } = res.data;\n\n      setAppData({ user, token });\n\n      localStorage.setItem('userId', user._id!);\n      localStorage.setItem('AuthToken', token);\n    })\n    .then(() => navigate('/main'))\n    .catch(err => {\n      console.log(err);\n    })\n    .finally(() => setAppData({ isLoading: false }));\n  }\n  return (\n    <section className=\"login__contaner\">\n      <section className=\"login__content\">\n        <h2>Login</h2>\n\n        <form onSubmit={onSubmit}>\n          <Input name='email' placeholder='Enter email' ref={emailRef} />\n          <Input name='password' placeholder='Enter password' ref={PasswordRef} />\n\n          <Button disabled={isLoading}>\n            Login\n          </Button>\n        </form>\n\n        <section>\n          Not registered?&nbsp;\n          <Link to='/register'>Register</Link>\n        </section>\n      </section>\n    </section>\n  )\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}