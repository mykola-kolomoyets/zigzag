{"ast":null,"code":"import React,{lazy,Suspense,useEffect}from'react';import{BrowserRouter,Routes,Route,Navigate}from\"react-router-dom\";import Loading from'./components/loading';import AppContext from'./store/context/app';import Auth from'./views/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=/*#__PURE__*/lazy(function(){return import('./views/register');});var Profile=/*#__PURE__*/lazy(function(){return import('./views/profile');});var Login=/*#__PURE__*/lazy(function(){return import('./views/login');});var Main=/*#__PURE__*/lazy(function(){return import('./views/main');});var App=function App(){var _AppContext$useContex=AppContext.useContext(),token=_AppContext$useContex.data.token;useEffect(function(){if(token)localStorage.setItem('AuthToken',token);},[token]);window.addEventListener('beforeunload',function(event){localStorage.removeItem('AuthToken');});return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(Loading,{isLoading:true}),children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/main\",element:/*#__PURE__*/_jsx(Auth,{children:/*#__PURE__*/_jsx(Main,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Auth,{children:/*#__PURE__*/_jsx(Profile,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{replace:true,to:localStorage.getItem('AuthToken')?'/login':'/main'})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(\"h1\",{children:\"Page not Found!!\"})})]})})});};export default App;","map":{"version":3,"sources":["/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/src/App.tsx"],"names":["React","lazy","Suspense","useEffect","BrowserRouter","Routes","Route","Navigate","Loading","AppContext","Auth","Register","Profile","Login","Main","App","useContext","token","data","localStorage","setItem","window","addEventListener","event","removeItem","getItem"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,IAAhB,CAAsBC,QAAtB,CAAgCC,SAAhC,KAAiD,OAAjD,CAEA,OACEC,aADF,CAEEC,MAFF,CAGEC,KAHF,CAIEC,QAJF,KAKO,kBALP,CAMA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CAEA,MAAOC,CAAAA,UAAP,KAAuB,qBAAvB,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,C,wFAEA,GAAMC,CAAAA,QAAQ,cAAGV,IAAI,CAAC,iBAAM,QAAO,kBAAP,CAAN,EAAD,CAArB,CACA,GAAMW,CAAAA,OAAO,cAAGX,IAAI,CAAC,iBAAM,QAAO,iBAAP,CAAN,EAAD,CAApB,CACA,GAAMY,CAAAA,KAAK,cAAGZ,IAAI,CAAC,iBAAM,QAAO,eAAP,CAAN,EAAD,CAAlB,CACA,GAAMa,CAAAA,IAAI,cAAGb,IAAI,CAAC,iBAAM,QAAO,cAAP,CAAN,EAAD,CAAjB,CAEA,GAAMc,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAChB,0BAA4BN,UAAU,CAACO,UAAX,EAA5B,CAAgBC,KAAhB,uBAAQC,IAAR,CAAgBD,KAAhB,CAEAd,SAAS,CAAC,UAAM,CACd,GAAIc,KAAJ,CAAWE,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCH,KAAlC,EACZ,CAFQ,CAEN,CAACA,KAAD,CAFM,CAAT,CAIAI,MAAM,CAACC,gBAAP,CAAwB,cAAxB,CAAwC,SAACC,KAAD,CAAW,CACjDJ,YAAY,CAACK,UAAb,CAAwB,WAAxB,EACD,CAFD,EAIA,mBACE,KAAC,aAAD,wBACE,KAAC,QAAD,EAAU,QAAQ,cAAE,KAAC,OAAD,EAAS,SAAS,KAAlB,EAApB,uBACE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,OAAZ,CAAoB,OAAO,cACzB,KAAC,IAAD,wBACE,KAAC,IAAD,IADF,EADF,EADF,cAOE,KAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,OAAO,cAC5B,KAAC,IAAD,wBACE,KAAC,OAAD,IADF,EADF,EAPF,cAaE,KAAC,KAAD,EAAO,IAAI,CAAC,WAAZ,CAAwB,OAAO,cAAE,KAAC,QAAD,IAAjC,EAbF,cAcE,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,OAAO,cAAE,KAAC,KAAD,IAA9B,EAdF,cAgBE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cAAE,KAAC,QAAD,EAAU,OAAO,KAAjB,CAAkB,EAAE,CAAEL,YAAY,CAACM,OAAb,CAAqB,WAArB,EAAoC,QAApC,CAA+C,OAArE,EAAzB,EAhBF,cAkBE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cAAE,wCAAzB,EAlBF,GADF,EADF,EADF,CA0BD,CArCD,CAuCA,cAAeV,CAAAA,GAAf","sourcesContent":["import React, { lazy, Suspense, useEffect } from 'react';\n\nimport {\n  BrowserRouter,\n  Routes,\n  Route,\n  Navigate\n} from \"react-router-dom\";\nimport Loading from './components/loading';\n\nimport AppContext from './store/context/app';\nimport Auth from './views/auth';\n\nconst Register = lazy(() => import('./views/register'));\nconst Profile = lazy(() => import('./views/profile'));\nconst Login = lazy(() => import('./views/login'));\nconst Main = lazy(() => import('./views/main'));\n\nconst App = () => {\n  const { data: { token } } = AppContext.useContext();\n\n  useEffect(() => {\n    if (token) localStorage.setItem('AuthToken', token);\n  }, [token]);\n\n  window.addEventListener('beforeunload', (event) => {\n    localStorage.removeItem('AuthToken');\n  });\n\n  return (\n    <BrowserRouter>\n      <Suspense fallback={<Loading isLoading/>}>\n        <Routes>\n          <Route path='/main' element={\n            <Auth>\n              <Main />\n            </Auth>\n          }/>\n\n          <Route path='/profile' element={\n            <Auth>\n              <Profile />\n            </Auth>\n          }/>\n\n          <Route path='/register' element={<Register />} />\n          <Route path='/login' element={<Login />} />\n\n          <Route path='/' element={<Navigate replace to={localStorage.getItem('AuthToken') ? '/login' : '/main'} />} />\n\n          <Route path='*' element={<h1>Page not Found!!</h1>} />\n        </Routes>\n      </Suspense>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}