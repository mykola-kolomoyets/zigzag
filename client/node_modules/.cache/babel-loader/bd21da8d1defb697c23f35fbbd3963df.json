{"ast":null,"code":"import _slicedToArray from\"/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useNavigate}from'react-router';import{Link}from'react-router-dom';import AuthService from'../../api/services/auth';import AppContext from'../../store/context/app';import Input from'./../../components/input';import Button from'./../../components/button';import Logo from'../../components/logo';import'./register.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),nameError=_useState8[0],setNameError=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),emailError=_useState10[0],setEmailError=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),passwordError=_useState12[0],setPasswordError=_useState12[1];var _AppContext$useContex=AppContext.useContext(),isLoading=_AppContext$useContex.data.isLoading,setAppData=_AppContext$useContex.setData;var navigate=useNavigate();var onNameChange=function onNameChange(event){setName(event.target.value);setNameError('');};var onEmailChange=function onEmailChange(event){setEmail(event.target.value);setEmailError('');};var onPasswordChange=function onPasswordChange(event){setPassword(event.target.value);setPasswordError('');};var onSubmit=function onSubmit(event){if(event)event.preventDefault();if(!name)return setNameError('Enter your nickname');if(!email)return setEmailError('Enter your email');if(!password)return setPasswordError('Enter your password');setAppData({isLoading:true});AuthService.register({name:name,email:email,password:password}).then(function(res){var _res$data=res.data,token=_res$data.token,user=_res$data.user;setAppData({user:user,token:token});}).then(function(){return navigate('/login');}).catch(function(err){console.log(err);}).finally(function(){return setAppData({isLoading:false});});};return/*#__PURE__*/_jsx(\"section\",{className:\"register__container container\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"register__content\",children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(\"h2\",{className:\"register__title\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"register__login\",children:[\"Not registered?\\xA0\",/*#__PURE__*/_jsx(Link,{className:\"register__login--link\",to:\"/login\",children:\"Login\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:\"register__form\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"register__inputs\",children:[/*#__PURE__*/_jsx(Input,{name:\"name\",placeholder:\"Enter name\",value:name,onChange:onNameChange,errorMessage:nameError}),/*#__PURE__*/_jsx(Input,{name:\"email\",placeholder:\"Enter email\",value:email,onChange:onEmailChange,errorMessage:emailError}),/*#__PURE__*/_jsx(Input,{name:\"password\",placeholder:\"Enter password\",value:password,onChange:onPasswordChange,errorMessage:passwordError})]}),/*#__PURE__*/_jsx(Button,{disabled:isLoading,children:\"Register\"})]})]})});};export default Register;","map":{"version":3,"sources":["/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/src/views/register/index.tsx"],"names":["React","useState","useNavigate","Link","AuthService","AppContext","Input","Button","Logo","Register","name","setName","email","setEmail","password","setPassword","nameError","setNameError","emailError","setEmailError","passwordError","setPasswordError","useContext","isLoading","data","setAppData","setData","navigate","onNameChange","event","target","value","onEmailChange","onPasswordChange","onSubmit","preventDefault","register","then","res","token","user","catch","err","console","log","finally"],"mappings":"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","sourcesContent":["import React, { ChangeEvent, FormEvent, useRef, useState, VFC } from 'react';\nimport { useNavigate } from 'react-router';\nimport { Link } from 'react-router-dom';\n\nimport AuthService from '../../api/services/auth';\n\nimport AppContext from '../../store/context/app';\n\nimport Input from './../../components/input';\nimport Button from './../../components/button';\nimport Logo from '../../components/logo';\n\nimport './register.scss';\n\nconst Register: VFC = () => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const [nameError, setNameError] = useState('');\n  const [emailError, setEmailError] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n\n  const { data: { isLoading }, setData: setAppData } = AppContext.useContext();\n\n  const navigate = useNavigate();\n\n  const onNameChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setName(event.target.value);\n    setNameError('');\n  }\n\n  const onEmailChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setEmail(event.target.value);\n    setEmailError('');\n  }\n\n  const onPasswordChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setPassword(event.target.value);\n    setPasswordError('');\n  }\n\n  const onSubmit = (event: FormEvent) => {\n    if (event) event.preventDefault();\n\n    if (!name) return setNameError('Enter your nickname');\n    if (!email) return setEmailError('Enter your email');\n    if (!password) return setPasswordError('Enter your password');\n\n    setAppData({ isLoading: true });\n\n    AuthService.register({\n      name: name!,\n      email: email!,\n      password: password!\n    })\n    .then(res => {\n      const { token, user } = res.data;\n\n      setAppData({\n        user,\n        token\n      });\n    })\n    .then(() => navigate('/login'))\n    .catch(err => {\n      console.log(err);\n\n    })\n    .finally(() => setAppData({ isLoading: false }));\n  }\n  return (\n    <section className=\"register__container container\">\n      <section className=\"register__content\">\n        <Logo />\n\n        <h2 className='register__title'>Register</h2>\n\n        <section className='register__login'>\n            Not registered?&nbsp;\n            <Link className='register__login--link' to='/login'>Login</Link>\n        </section>\n\n        <form onSubmit={onSubmit} className='register__form'>\n          <section className='register__inputs'>\n            <Input\n              name='name'\n              placeholder='Enter name'\n              value={name}\n              onChange={onNameChange}\n              errorMessage={nameError}\n            />\n\n            <Input\n              name='email'\n              placeholder='Enter email'\n              value={email}\n              onChange={onEmailChange}\n              errorMessage={emailError}\n            />\n\n            <Input\n              name='password'\n              placeholder='Enter password'\n              value={password}\n              onChange={onPasswordChange}\n              errorMessage={passwordError}\n            />\n          </section>\n\n          <Button disabled={isLoading}>\n            Register\n          </Button>\n        </form>\n\n      </section>\n    </section>\n  )\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}