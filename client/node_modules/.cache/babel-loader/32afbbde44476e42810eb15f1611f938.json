{"ast":null,"code":"import _slicedToArray from\"/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{memo,useEffect,useState}from\"react\";import{useNavigate}from\"react-router\";import StatsService from\"../../api/services/stats\";import AppContext from\"../../store/context/app\";import StatsContext from\"../../store/context/stats\";import Navigation from\"../../components/navbar\";import'./profile.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(){var _AppContext$useContex=AppContext.useContext(),_AppContext$useContex2=_AppContext$useContex.data,id=_AppContext$useContex2.user._id,token=_AppContext$useContex2.token;var _StatsContext$useCont=StatsContext.useContext(),data=_StatsContext$useCont.data,_StatsContext$useCont2=_StatsContext$useCont.data,totalGames=_StatsContext$useCont2.totalGames,moves=_StatsContext$useCont2.moves,bestGame=_StatsContext$useCont2.bestGame,setStatsData=_StatsContext$useCont.setData;var _useState=useState(data),_useState2=_slicedToArray(_useState,2),stats=_useState2[0],setStats=_useState2[1];var navigate=useNavigate();useEffect(function(){var userId=id||localStorage.getItem('userId');var authToken=token||localStorage.getItem('AuthToken');if(!userId&&!authToken)navigate('/login');StatsService.get(userId).then(function(res){setStatsData(res.data);setStats(res.data);}).catch(function(err){navigate('/login');});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[id]);useEffect(function(){setStats(data);},[data]);return/*#__PURE__*/_jsxs(\"main\",{className:\"profile__container container\",children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"profile__content\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"profile__title\",children:\"Profile\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"profile__subtitle\",children:\"Your statistics:\"}),/*#__PURE__*/_jsxs(\"article\",{className:\"profile__stats-item\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"profile__stats-item_title\",children:\"Total games played: \"}),/*#__PURE__*/_jsx(\"p\",{children:stats.totalGames})]}),/*#__PURE__*/_jsxs(\"article\",{className:\"profile__stats-item\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"profile__stats-item_title\",children:\"Best game: \"}),/*#__PURE__*/_jsxs(\"article\",{className:\"profile__stats-subitem\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"profile__stats-item_subtitle\",children:\"Moves: \"}),/*#__PURE__*/_jsx(\"p\",{children:stats.moves})]}),/*#__PURE__*/_jsxs(\"article\",{className:\"profile__stats-subitem\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"profile__stats-item_subtitle\",children:\"Field: \"}),/*#__PURE__*/_jsxs(\"p\",{children:[stats.bestGame.field.width,\" x \",stats.bestGame.field.height]})]})]})]})]});};export default/*#__PURE__*/memo(Profile);","map":{"version":3,"sources":["/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/src/views/profile/index.tsx"],"names":["memo","useEffect","useState","useNavigate","StatsService","AppContext","StatsContext","Navigation","Profile","useContext","data","id","user","_id","token","totalGames","moves","bestGame","setStatsData","setData","stats","setStats","navigate","userId","localStorage","getItem","authToken","get","then","res","catch","err","field","width","height"],"mappings":"6JAAA,OAASA,IAAT,CAAeC,SAAf,CAA0BC,QAA1B,KAA+C,OAA/C,CACA,OAASC,WAAT,KAA4B,cAA5B,CAEA,MAAOC,CAAAA,YAAP,KAAyB,0BAAzB,CAIA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CAEA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CAEA,MAAO,gBAAP,C,wFAEA,GAAMC,CAAAA,OAAY,CAAG,QAAfA,CAAAA,OAAe,EAAM,CACzB,0BAA+CH,UAAU,CAACI,UAAX,EAA/C,8CAAQC,IAAR,CAA6BC,EAA7B,wBAAgBC,IAAhB,CAAwBC,GAAxB,CAAmCC,KAAnC,wBAAmCA,KAAnC,CAEA,0BAI6BR,YAAY,CAACG,UAAb,EAJ7B,CAAQC,IAAR,uBAAQA,IAAR,8CAAcA,IAAd,CACEK,UADF,wBACEA,UADF,CAEEC,KAFF,wBAEEA,KAFF,CAGEC,QAHF,wBAGEA,QAHF,CAIYC,YAJZ,uBAIGC,OAJH,CAMA,cAA0BjB,QAAQ,CAAaQ,IAAb,CAAlC,wCAAOU,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,QAAQ,CAAGnB,WAAW,EAA5B,CAEAF,SAAS,CAAC,UAAM,CACd,GAAMsB,CAAAA,MAAM,CAAGZ,EAAE,EAAIa,YAAY,CAACC,OAAb,CAAqB,QAArB,CAArB,CACA,GAAMC,CAAAA,SAAS,CAAGZ,KAAK,EAAIU,YAAY,CAACC,OAAb,CAAqB,WAArB,CAA3B,CAEA,GAAI,CAACF,MAAD,EAAW,CAACG,SAAhB,CAA2BJ,QAAQ,CAAC,QAAD,CAAR,CAE3BlB,YAAY,CAACuB,GAAb,CAAiBJ,MAAjB,EACGK,IADH,CACQ,SAACC,GAAD,CAAS,CACbX,YAAY,CAACW,GAAG,CAACnB,IAAL,CAAZ,CACAW,QAAQ,CAACQ,GAAG,CAACnB,IAAL,CAAR,CACD,CAJH,EAKGoB,KALH,CAKS,SAACC,GAAD,CAAS,CACdT,QAAQ,CAAC,QAAD,CAAR,CACD,CAPH,EAQA;AACD,CAfQ,CAeN,CAACX,EAAD,CAfM,CAAT,CAiBAV,SAAS,CAAC,UAAM,CACdoB,QAAQ,CAACX,IAAD,CAAR,CACD,CAFQ,CAEN,CAACA,IAAD,CAFM,CAAT,CAIA,mBACE,cAAM,SAAS,CAAC,8BAAhB,wBACE,KAAC,UAAD,IADF,cAGE,iBAAS,SAAS,CAAC,kBAAnB,wBACE,WAAI,SAAS,CAAC,gBAAd,qBADF,cAGE,WAAI,SAAS,CAAC,mBAAd,8BAHF,cAKE,iBAAS,SAAS,CAAC,qBAAnB,wBACE,WAAI,SAAS,CAAC,2BAAd,kCADF,cAEE,mBAAIU,KAAK,CAACL,UAAV,EAFF,GALF,cAUE,iBAAS,SAAS,CAAC,qBAAnB,wBACE,WAAI,SAAS,CAAC,2BAAd,yBADF,cAQE,iBAAS,SAAS,CAAC,wBAAnB,wBACE,WAAI,SAAS,CAAC,8BAAd,qBADF,cAEE,mBAAIK,KAAK,CAACJ,KAAV,EAFF,GARF,cAaE,iBAAS,SAAS,CAAC,wBAAnB,wBACE,WAAI,SAAS,CAAC,8BAAd,qBADF,cAEE,qBAAII,KAAK,CAACH,QAAN,CAAee,KAAf,CAAqBC,KAAzB,OAAmCb,KAAK,CAACH,QAAN,CAAee,KAAf,CAAqBE,MAAxD,GAFF,GAbF,GAVF,GAHF,GADF,CAmCD,CArED,CAuEA,2BAAelC,IAAI,CAACQ,OAAD,CAAnB","sourcesContent":["import { memo, useEffect, useState, VFC } from \"react\";\nimport { useNavigate } from \"react-router\";\n\nimport StatsService from \"../../api/services/stats\";\n\nimport { StatsStore } from \"../../utils\";\n\nimport AppContext from \"../../store/context/app\";\nimport StatsContext from \"../../store/context/stats\";\n\nimport Navigation from \"../../components/navbar\";\n\nimport './profile.scss';\n\nconst Profile: VFC = () => {\n  const { data: { user: { _id: id }, token } } = AppContext.useContext();\n\n  const { data, data: {\n    totalGames,\n    moves,\n    bestGame\n  }, setData: setStatsData } = StatsContext.useContext();\n\n  const [stats, setStats] = useState<StatsStore>(data);\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const userId = id || localStorage.getItem('userId');\n    const authToken = token || localStorage.getItem('AuthToken')\n\n    if (!userId && !authToken) navigate('/login');\n\n    StatsService.get(userId!)\n      .then((res) => {\n        setStatsData(res.data);\n        setStats(res.data);\n      })\n      .catch((err) => {\n        navigate('/login');\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  useEffect(() => {\n    setStats(data);\n  }, [data]);\n\n  return (\n    <main className='profile__container container'>\n      <Navigation />\n\n      <section className='profile__content'>\n        <h1 className='profile__title'>Profile</h1>\n\n        <h3 className='profile__subtitle'>Your statistics:</h3>\n\n        <article className='profile__stats-item'>\n          <h4 className='profile__stats-item_title'>Total games played: </h4>\n          <p>{stats.totalGames}</p>\n        </article>\n\n        <article className='profile__stats-item'>\n          <h4 className='profile__stats-item_title'>Best game: </h4>\n\n          {/* <article>\n            <h5 className='profile__stats-item_subtitle'>Time: </h5>\n            <p>{stats.bestGame.time}</p>\n          </article> */}\n\n          <article className='profile__stats-subitem'>\n            <h5 className='profile__stats-item_subtitle'>Moves: </h5>\n            <p>{stats.moves}</p>\n          </article>\n\n          <article className='profile__stats-subitem'>\n            <h5 className='profile__stats-item_subtitle'>Field: </h5>\n            <p>{stats.bestGame.field.width} x {stats.bestGame.field.height}</p>\n          </article>\n        </article>\n      </section>\n    </main>\n  );\n};\n\nexport default memo(Profile);"]},"metadata":{},"sourceType":"module"}