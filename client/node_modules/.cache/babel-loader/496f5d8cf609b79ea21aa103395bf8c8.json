{"ast":null,"code":"import _objectSpread from\"/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useRef,useState}from\"react\";import{useNavigate}from\"react-router\";import AuthService from\"../../api/services/auth\";import{Difficulty}from\"../../utils\";import Button from\"../../components/button\";import Input from\"../../components/input\";import Navigation from\"../../components/navbar\";import Radio from\"../../components/radio\";import Timer from\"../../components/timer\";import AppContext from\"../../store/context/app\";import GameContext from\"../../store/context/game\";import StatsContext from\"../../store/context/stats\";import Game from\"../game\";import'./main.scss';import SummaryContext from\"../../store/context/summary\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Main=function Main(){var _AppContext$useContex=AppContext.useContext(),_AppContext$useContex2=_AppContext$useContex.data,_AppContext$useContex3=_AppContext$useContex2.user,id=_AppContext$useContex3._id,name=_AppContext$useContex3.name,token=_AppContext$useContex2.token,difficulty=_AppContext$useContex2.difficulty,setAppData=_AppContext$useContex.setData;var _StatsContext$useCont=StatsContext.useContext(),setStatsData=_StatsContext$useCont.setData;var _GameContext$useConte=GameContext.useContext(),setGameData=_GameContext$useConte.setData;var _SummaryContext$useCo=SummaryContext.useContext(),setSummaryData=_SummaryContext$useCo.setData;var widthRef=useRef(null);var heightRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isStarted=_useState2[0],setIsStarted=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFinished=_useState4[0],setIsFinished=_useState4[1];var onDifficultyChange=function onDifficultyChange(event){setAppData({difficulty:event.target.value});};var onFinishGame=function onFinishGame(){setIsFinished(true);setIsStarted(false);};var onStartGame=function onStartGame(){var _map=[widthRef,heightRef].map(function(ref){var _ref$current;return((_ref$current=ref.current)===null||_ref$current===void 0?void 0:_ref$current.value)||0;}),_map2=_slicedToArray(_map,2),width=_map2[0],height=_map2[1];if(!width||!height||Number(width)<4||Number(height)<4||Number(width)>10||Number(height)>10){return setSummaryData({isShow:true,isSuccess:false,title:'Field is invalid!',subtitle:'Enter field width and height minimum 4 and maximum 10'});}var fieldSize={width:Number(width),height:Number(height)};setGameData({fieldSize:fieldSize});setIsStarted(true);};var navigate=useNavigate();useEffect(function(){var userId=id||localStorage.getItem('userId');AuthService.getUser(userId).then(function(res){var _res$data=res.data,user=_res$data.user,stats=_res$data.stats;setAppData({user:user});setStatsData(_objectSpread({},stats));}).catch(function(err){navigate('/login');});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[id,token]);return/*#__PURE__*/_jsxs(\"main\",{className:\"main__container container\",children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsx(\"section\",{className:\"main__content\",children:isStarted?/*#__PURE__*/_jsxs(\"section\",{className:\"main__game\",children:[/*#__PURE__*/_jsx(Timer,{isTicking:!isFinished}),/*#__PURE__*/_jsx(Game,{onFinish:onFinishGame}),/*#__PURE__*/_jsx(Button,{onClick:onFinishGame,children:\"Finish Game\"})]}):/*#__PURE__*/_jsxs(\"section\",{className:\"main__menu\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"main__menu--title\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Welcome back,\"}),/*#__PURE__*/_jsx(\"br\",{}),name]}),/*#__PURE__*/_jsx(\"h4\",{className:\"main__menu--subtitle\",children:\"Start the new game\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"main__menu--field-inputs\",children:[/*#__PURE__*/_jsx(Input,{placeholder:\"Field width\",type:\"number\",name:\"width\",ref:widthRef,errorMessage:\"\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Field height\",type:\"number\",name:\"width\",ref:heightRef,errorMessage:\"\"}),/*#__PURE__*/_jsx(Radio,{label:'Difficulty',value:difficulty,items:[{value:Difficulty.easy,label:'Easy'},{value:Difficulty.middle,label:'Middle'}],inputProps:{onChange:onDifficultyChange}})]}),/*#__PURE__*/_jsx(Button,{onClick:onStartGame,children:\"Start Game\"})]})})]});};export default Main;","map":{"version":3,"sources":["/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/src/views/main/index.tsx"],"names":["useEffect","useRef","useState","useNavigate","AuthService","Difficulty","Button","Input","Navigation","Radio","Timer","AppContext","GameContext","StatsContext","Game","SummaryContext","Main","useContext","data","user","id","_id","name","token","difficulty","setAppData","setData","setStatsData","setGameData","setSummaryData","widthRef","heightRef","isStarted","setIsStarted","isFinished","setIsFinished","onDifficultyChange","event","target","value","onFinishGame","onStartGame","map","ref","current","width","height","Number","isShow","isSuccess","title","subtitle","fieldSize","navigate","userId","localStorage","getItem","getUser","then","res","stats","catch","err","easy","label","middle","onChange"],"mappings":"yTAAA,OAAsBA,SAAtB,CAAiCC,MAAjC,CAAyCC,QAAzC,KAA8D,OAA9D,CACA,OAASC,WAAT,KAA4B,cAA5B,CAEA,MAAOC,CAAAA,WAAP,KAAwB,yBAAxB,CAEA,OAASC,UAAT,KAAiC,aAAjC,CAEA,MAAOC,CAAAA,MAAP,KAAmB,yBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,wBAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,wBAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,wBAAlB,CAEA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,SAAjB,CAEA,MAAO,aAAP,CACA,MAAOC,CAAAA,cAAP,KAA2B,6BAA3B,C,wFAEA,GAAMC,CAAAA,IAAS,CAAG,QAAZA,CAAAA,IAAY,EAAM,CACtB,0BAI2BL,UAAU,CAACM,UAAX,EAJ3B,8CAAQC,IAAR,+CACEC,IADF,CACeC,EADf,wBACUC,GADV,CACmBC,IADnB,wBACmBA,IADnB,CAEEC,KAFF,wBAEEA,KAFF,CAGEC,UAHF,wBAGEA,UAHF,CAIYC,UAJZ,uBAIGC,OAJH,CAKA,0BAAkCb,YAAY,CAACI,UAAb,EAAlC,CAAiBU,YAAjB,uBAAQD,OAAR,CACA,0BAAiCd,WAAW,CAACK,UAAZ,EAAjC,CAAiBW,WAAjB,uBAAQF,OAAR,CACA,0BAAoCX,cAAc,CAACE,UAAf,EAApC,CAAiBY,cAAjB,uBAAQH,OAAR,CAEA,GAAMI,CAAAA,QAAQ,CAAG7B,MAAM,CAAmB,IAAnB,CAAvB,CACA,GAAM8B,CAAAA,SAAS,CAAG9B,MAAM,CAAmB,IAAnB,CAAxB,CAEA,cAAkCC,QAAQ,CAAC,KAAD,CAA1C,wCAAO8B,SAAP,eAAkBC,YAAlB,eACA,eAAoC/B,QAAQ,CAAC,KAAD,CAA5C,yCAAOgC,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,KAAD,CAA0C,CACnEZ,UAAU,CAAC,CAAED,UAAU,CAAEa,KAAK,CAACC,MAAN,CAAaC,KAA3B,CAAD,CAAV,CACD,CAFD,CAIA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBL,aAAa,CAAC,IAAD,CAAb,CACAF,YAAY,CAAC,KAAD,CAAZ,CACD,CAHD,CAKA,GAAMQ,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,SAGI,CAACX,QAAD,CAAWC,SAAX,EAAsBW,GAAtB,CAA0B,SAAAC,GAAG,yBAAI,eAAAA,GAAG,CAACC,OAAJ,oDAAaL,KAAb,GAAsB,CAA1B,EAA7B,CAHJ,8BACEM,KADF,UAEEC,MAFF,UAKA,GAAK,CAACD,KAAD,EAAU,CAACC,MAAZ,EACDC,MAAM,CAACF,KAAD,CAAN,CAAgB,CAAhB,EAAqBE,MAAM,CAACD,MAAD,CAAN,CAAiB,CADrC,EAEDC,MAAM,CAACF,KAAD,CAAN,CAAgB,EAAhB,EAAsBE,MAAM,CAACD,MAAD,CAAN,CAAiB,EAF1C,CAGE,CACA,MAAOjB,CAAAA,cAAc,CAAC,CACpBmB,MAAM,CAAE,IADY,CAEpBC,SAAS,CAAE,KAFS,CAGpBC,KAAK,CAAE,mBAHa,CAIpBC,QAAQ,CAAE,uDAJU,CAAD,CAArB,CAMD,CAED,GAAMC,CAAAA,SAAe,CAAG,CACtBP,KAAK,CAAEE,MAAM,CAACF,KAAD,CADS,CAEtBC,MAAM,CAAEC,MAAM,CAACD,MAAD,CAFQ,CAAxB,CAKAlB,WAAW,CAAC,CAAEwB,SAAS,CAATA,SAAF,CAAD,CAAX,CAEAnB,YAAY,CAAC,IAAD,CAAZ,CACD,CA1BD,CA4BA,GAAMoB,CAAAA,QAAQ,CAAGlD,WAAW,EAA5B,CAEAH,SAAS,CAAC,UAAM,CACd,GAAMsD,CAAAA,MAAM,CAAGlC,EAAE,EAAImC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAArB,CAEApD,WAAW,CAACqD,OAAZ,CAAoBH,MAApB,EACGI,IADH,CACQ,SAAAC,GAAG,CAAI,CACX,cAAwBA,GAAG,CAACzC,IAA5B,CAAQC,IAAR,WAAQA,IAAR,CAAcyC,KAAd,WAAcA,KAAd,CAEAnC,UAAU,CAAC,CAAEN,IAAI,CAAJA,IAAF,CAAD,CAAV,CACAQ,YAAY,kBAAMiC,KAAN,EAAZ,CACD,CANH,EAOGC,KAPH,CAOS,SAACC,GAAD,CAAS,CACdT,QAAQ,CAAC,QAAD,CAAR,CACD,CATH,EAUA;AACD,CAdQ,CAcN,CAACjC,EAAD,CAAKG,KAAL,CAdM,CAAT,CAgBA,mBACE,cAAM,SAAS,CAAC,2BAAhB,wBACE,KAAC,UAAD,IADF,cAIE,gBAAS,SAAS,CAAC,eAAnB,UACGS,SAAS,cACR,iBAAS,SAAS,CAAC,YAAnB,wBACE,KAAC,KAAD,EAAO,SAAS,CAAE,CAACE,UAAnB,EADF,cAEE,KAAC,IAAD,EAAM,QAAQ,CAAEM,YAAhB,EAFF,cAGE,KAAC,MAAD,EAAQ,OAAO,CAAEA,YAAjB,yBAHF,GADQ,cASR,iBAAS,SAAS,CAAC,YAAnB,wBACE,YAAI,SAAS,CAAC,mBAAd,wBACE,uCADF,cAEE,aAFF,CAGGlB,IAHH,GADF,cAOE,WAAI,SAAS,CAAC,sBAAd,gCAPF,cASE,iBAAS,SAAS,CAAC,0BAAnB,wBACE,KAAC,KAAD,EAAO,WAAW,CAAC,aAAnB,CAAiC,IAAI,CAAC,QAAtC,CAA+C,IAAI,CAAC,OAApD,CAA4D,GAAG,CAAEQ,QAAjE,CAA2E,YAAY,CAAC,EAAxF,EADF,cAGE,KAAC,KAAD,EAAO,WAAW,CAAC,cAAnB,CAAkC,IAAI,CAAC,QAAvC,CAAgD,IAAI,CAAC,OAArD,CAA6D,GAAG,CAAEC,SAAlE,CAA6E,YAAY,CAAC,EAA1F,EAHF,cAKE,KAAC,KAAD,EACE,KAAK,CAAE,YADT,CAEE,KAAK,CAAEP,UAFT,CAGE,KAAK,CAAE,CACL,CACEe,KAAK,CAAElC,UAAU,CAAC0D,IADpB,CAEEC,KAAK,CAAE,MAFT,CADK,CAKL,CACEzB,KAAK,CAAElC,UAAU,CAAC4D,MADpB,CAEED,KAAK,CAAE,QAFT,CALK,CAHT,CAaE,UAAU,CAAE,CAAEE,QAAQ,CAAE9B,kBAAZ,CAbd,EALF,GATF,cA+BE,KAAC,MAAD,EAAQ,OAAO,CAAEK,WAAjB,wBA/BF,GAVJ,EAJF,GADF,CAsDD,CA7HD,CA+HA,cAAezB,CAAAA,IAAf","sourcesContent":["import { ChangeEvent, useEffect, useRef, useState, VFC } from \"react\";\nimport { useNavigate } from \"react-router\";\n\nimport AuthService from \"../../api/services/auth\";\n\nimport { Difficulty, Size } from \"../../utils\";\n\nimport Button from \"../../components/button\";\nimport Input from \"../../components/input\";\nimport Navigation from \"../../components/navbar\";\nimport Radio from \"../../components/radio\";\nimport Timer from \"../../components/timer\";\n\nimport AppContext from \"../../store/context/app\";\nimport GameContext from \"../../store/context/game\";\nimport StatsContext from \"../../store/context/stats\";\n\nimport Game from \"../game\";\n\nimport './main.scss';\nimport SummaryContext from \"../../store/context/summary\";\n\nconst Main: VFC = () => {\n  const { data: {\n    user: { _id: id, name },\n    token,\n    difficulty\n  }, setData: setAppData } = AppContext.useContext();\n  const { setData: setStatsData } = StatsContext.useContext();\n  const { setData: setGameData } = GameContext.useContext();\n  const { setData: setSummaryData } = SummaryContext.useContext();\n\n  const widthRef = useRef<HTMLInputElement>(null);\n  const heightRef = useRef<HTMLInputElement>(null);\n\n  const [isStarted, setIsStarted] = useState(false);\n  const [isFinished, setIsFinished] = useState(false);\n\n  const onDifficultyChange = (event: ChangeEvent<HTMLInputElement>) => {\n    setAppData({ difficulty: event.target.value });\n  }\n\n  const onFinishGame = () => {\n    setIsFinished(true);\n    setIsStarted(false);\n  }\n\n  const onStartGame = () => {\n    const [\n      width,\n      height\n    ] = [widthRef, heightRef].map(ref => ref.current?.value || 0);\n\n    if ((!width || !height) ||\n      (Number(width) < 4 || Number(height) < 4) ||\n      (Number(width) > 10 || Number(height) > 10)\n    ) {\n      return setSummaryData({\n        isShow: true,\n        isSuccess: false,\n        title: 'Field is invalid!',\n        subtitle: 'Enter field width and height minimum 4 and maximum 10'\n      });\n    }\n\n    const fieldSize: Size = {\n      width: Number(width),\n      height: Number(height)\n    }\n\n    setGameData({ fieldSize });\n\n    setIsStarted(true);\n  }\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const userId = id || localStorage.getItem('userId');\n\n    AuthService.getUser(userId!)\n      .then(res => {\n        const { user, stats } = res.data;\n\n        setAppData({ user });\n        setStatsData({ ...stats });\n      })\n      .catch((err) => {\n        navigate('/login');\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id, token]);\n\n  return (\n    <main className='main__container container'>\n      <Navigation />\n\n\n      <section className='main__content'>\n        {isStarted ? (\n          <section className=\"main__game\">\n            <Timer isTicking={!isFinished} />\n            <Game onFinish={onFinishGame} />\n            <Button onClick={onFinishGame}>\n              Finish Game\n            </Button>\n          </section>\n        ) : (\n          <section className='main__menu'>\n            <h1 className='main__menu--title'>\n              <span>Welcome back,</span>\n              <br />\n              {name}\n            </h1>\n\n            <h4 className='main__menu--subtitle'>Start the new game</h4>\n\n            <section className='main__menu--field-inputs'>\n              <Input placeholder='Field width' type=\"number\" name=\"width\" ref={widthRef} errorMessage='' />\n\n              <Input placeholder='Field height' type=\"number\" name=\"width\" ref={heightRef} errorMessage='' />\n\n              <Radio\n                label={'Difficulty'}\n                value={difficulty}\n                items={[\n                  {\n                    value: Difficulty.easy,\n                    label: 'Easy',\n                  },\n                  {\n                    value: Difficulty.middle,\n                    label: 'Middle',\n                  },\n                ]}\n                inputProps={{ onChange: onDifficultyChange }}\n              />\n            </section>\n\n            <Button onClick={onStartGame}>\n              Start Game\n            </Button>\n          </section>\n        )}\n      </section>\n    </main>\n  )\n};\n\nexport default Main;"]},"metadata":{},"sourceType":"module"}