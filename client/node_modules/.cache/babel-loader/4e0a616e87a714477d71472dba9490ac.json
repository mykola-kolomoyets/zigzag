{"ast":null,"code":"var _jsxFileName = \"/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/src/views/login/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport AuthService from '../../api/services/auth';\nimport AppContext from '../../store/context/app';\nimport Button from '../../components/button';\nimport Input from '../../components/input';\nimport Logo from '../../components/logo';\nimport './login.scss';\nimport SummaryContext from '../../store/context/summary';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const [login, setLogin] = useState('');\n  const [password, setPassword] = useState('');\n  const [loginError, setLoginError] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n  const {\n    data: {\n      isLoading\n    },\n    setData: setAppData\n  } = AppContext.useContext();\n  const {\n    setData: setSummaryData\n  } = SummaryContext.useContext();\n  const navigate = useNavigate();\n\n  const onLoginChange = event => setLogin(event.target.value);\n\n  const onPasswordChange = event => setPassword(event.target.value);\n\n  const onSubmit = event => {\n    if (event) event.preventDefault();\n    if (!login) setLoginError('Enter email or nickname');\n    if (!password) setPasswordError('Enter password');\n    setAppData({\n      isLoading: true\n    });\n    AuthService.login({\n      email: login,\n      password: password\n    }).then(res => {\n      const {\n        token,\n        user\n      } = res.data;\n      setAppData({\n        user,\n        token\n      });\n      localStorage.setItem('userId', user._id);\n      localStorage.setItem('AuthToken', token);\n    }).then(() => navigate('/main')).catch(err => {\n      console.log(err.response.message);\n      setSummaryData({\n        isShow: true,\n        isSuccess: false,\n        title: \"Something went wrong!\",\n        subtitle: err.response.data.message\n      });\n    }).finally(() => setAppData({\n      isLoading: false\n    }));\n  };\n\n  useEffect(() => {\n    localStorage.removeItem('userId');\n    localStorage.removeItem('AuthToken');\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"login__container container\",\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"login__content\",\n      children: [/*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"login__title\",\n        children: \"Hello Again!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"login__register\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Not registered?\\xA0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          className: \"login__register--link\",\n          to: \"/register\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        className: \"login__form\",\n        children: [/*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"login__inputs\",\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            name: \"email\",\n            placeholder: \"Enter login or email\",\n            value: login,\n            onChange: onLoginChange,\n            errorMessage: loginError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"password\",\n            placeholder: \"Enter password\",\n            value: password,\n            onChange: onPasswordChange,\n            errorMessage: passwordError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            disabled: isLoading,\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"CyzNsih86K3fvHXb3xwz16IbF6w=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/src/views/login/index.tsx"],"names":["React","useEffect","useState","Link","useNavigate","AuthService","AppContext","Button","Input","Logo","SummaryContext","Login","login","setLogin","password","setPassword","loginError","setLoginError","passwordError","setPasswordError","data","isLoading","setData","setAppData","useContext","setSummaryData","navigate","onLoginChange","event","target","value","onPasswordChange","onSubmit","preventDefault","email","then","res","token","user","localStorage","setItem","_id","catch","err","console","log","response","message","isShow","isSuccess","title","subtitle","finally","removeItem"],"mappings":"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","sourcesContent":["import React, { ChangeEvent, FormEvent, useEffect, useRef, useState, VFC } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\n\nimport AuthService from '../../api/services/auth';\n\nimport AppContext from '../../store/context/app';\n\nimport Button from '../../components/button';\nimport Input from '../../components/input';\n\nimport Logo from '../../components/logo';\n\nimport './login.scss';\nimport SummaryContext from '../../store/context/summary';\n\nconst Login: VFC = () => {\n  const [login, setLogin] = useState('');\n  const [password, setPassword] = useState('');\n\n  const [loginError, setLoginError] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n\n  const { data: { isLoading }, setData: setAppData } = AppContext.useContext();\n  const { setData: setSummaryData } = SummaryContext.useContext();\n\n  const navigate = useNavigate();\n\n  const onLoginChange = (event: ChangeEvent<HTMLInputElement>) => setLogin(event.target.value);\n  const onPasswordChange = (event: ChangeEvent<HTMLInputElement>) => setPassword(event.target.value);\n\n  const onSubmit = (event: FormEvent) => {\n    if (event) event.preventDefault();\n\n    if (!login) setLoginError('Enter email or nickname');\n    if (!password) setPasswordError('Enter password');\n\n    setAppData({ isLoading: true });\n\n    AuthService.login({\n      email: login,\n      password: password\n    })\n    .then(res => {\n      const { token, user } = res.data;\n\n      setAppData({ user, token });\n\n      localStorage.setItem('userId', user._id!);\n      localStorage.setItem('AuthToken', token);\n    })\n    .then(() => navigate('/main'))\n    .catch(err => {\n      console.log(err.response.message);\n\n      setSummaryData({\n        isShow: true,\n        isSuccess: false,\n        title: \"Something went wrong!\",\n        subtitle: err.response.data.message\n      });\n    })\n    .finally(() => setAppData({ isLoading: false }));\n  }\n\n  useEffect(() => {\n    localStorage.removeItem('userId');\n    localStorage.removeItem('AuthToken');\n  }, []);\n\n  return (\n    <section className=\"login__container container\">\n      <section className=\"login__content\">\n        <Logo />\n\n        <h2 className='login__title'>Hello Again!</h2>\n\n        <section className='login__register'>\n          <span>Not registered?&nbsp;</span>\n          <Link className='login__register--link' to='/register'>Register</Link>\n        </section>\n\n        <form onSubmit={onSubmit} className='login__form'>\n          <section className='login__inputs'>\n            <Input\n              name='email'\n              placeholder='Enter login or email'\n              value={login}\n              onChange={onLoginChange}\n              errorMessage={loginError}\n            />\n            <Input\n              name='password'\n              placeholder='Enter password'\n              value={password}\n              onChange={onPasswordChange}\n              errorMessage={passwordError}\n            />\n          </section>\n\n          <section>\n            <Button disabled={isLoading}>\n              Login\n            </Button>\n          </section>\n\n        </form>\n\n      </section>\n    </section>\n  )\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}