{"ast":null,"code":"var _jsxFileName = \"/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/src/views/login/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport AuthService from '../../api/services/auth';\nimport AppContext from '../../store/context/app';\nimport Button from '../../components/button';\nimport Input from '../../components/input';\nimport './login.scss';\nimport Logo from '../../components/logo';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const emailRef = useRef(null);\n  const PasswordRef = useRef(null);\n  const {\n    data: {\n      isLoading\n    },\n    setData: setAppData\n  } = AppContext.useContext();\n  const navigate = useNavigate();\n\n  const onSubmit = event => {\n    if (event) event.preventDefault();\n    const [email, password] = [emailRef, PasswordRef].map(ref => {\n      var _ref$current;\n\n      return (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.value;\n    });\n    setAppData({\n      isLoading: true\n    });\n    AuthService.login({\n      email: email,\n      password: password\n    }).then(res => {\n      const {\n        token,\n        user\n      } = res.data;\n      setAppData({\n        user,\n        token\n      });\n      localStorage.setItem('userId', user._id);\n      localStorage.setItem('AuthToken', token);\n    }).then(() => navigate('/main')).catch(err => {\n      console.log(err);\n    }).finally(() => setAppData({\n      isLoading: false\n    }));\n  };\n\n  useEffect(() => {\n    localStorage.removeItem('userId');\n    localStorage.removeItem('AuthToken');\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"login__contaner container\",\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"login__content\",\n      children: [/*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Hello Again!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          name: \"email\",\n          placeholder: \"Enter login or email\",\n          ref: emailRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          name: \"password\",\n          placeholder: \"Enter password\",\n          ref: PasswordRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          disabled: isLoading,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        children: [\"Not registered?\\xA0\", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"AmdTQYb+IZXGPl6dpsmd03DBgXM=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/pc/KolomoyetsProjects/Study/project-zigzag/project-zigzag/client/src/views/login/index.tsx"],"names":["React","useEffect","useRef","Link","useNavigate","AuthService","AppContext","Button","Input","Logo","Login","emailRef","PasswordRef","data","isLoading","setData","setAppData","useContext","navigate","onSubmit","event","preventDefault","email","password","map","ref","current","value","login","then","res","token","user","localStorage","setItem","_id","catch","err","console","log","finally","removeItem"],"mappings":"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","sourcesContent":["import React, { FormEvent, useEffect, useRef, VFC } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\n\nimport AuthService from '../../api/services/auth';\n\nimport AppContext from '../../store/context/app';\n\nimport Button from '../../components/button';\nimport Input from '../../components/input';\n\nimport './login.scss';\nimport Logo from '../../components/logo';\n\nconst Login: VFC = () => {\n  const emailRef = useRef<HTMLInputElement>(null);\n  const PasswordRef = useRef<HTMLInputElement>(null);\n\n  const { data: { isLoading }, setData: setAppData } = AppContext.useContext();\n\n  const navigate = useNavigate();\n\n  const onSubmit = (event: FormEvent) => {\n    if (event) event.preventDefault();\n\n    const [\n      email,\n      password\n    ] = [emailRef, PasswordRef].map(ref => ref.current?.value);\n\n    setAppData({ isLoading: true });\n\n    AuthService.login({\n      email: email!,\n      password: password!\n    })\n    .then(res => {\n      const { token, user } = res.data;\n\n      setAppData({ user, token });\n\n      localStorage.setItem('userId', user._id!);\n      localStorage.setItem('AuthToken', token);\n    })\n    .then(() => navigate('/main'))\n    .catch(err => {\n      console.log(err);\n    })\n    .finally(() => setAppData({ isLoading: false }));\n  }\n\n  useEffect(() => {\n    localStorage.removeItem('userId');\n    localStorage.removeItem('AuthToken');\n  }, []);\n\n  return (\n    <section className=\"login__contaner container\">\n      <section className=\"login__content\">\n        <Logo />\n\n        <h2>Hello Again!</h2>\n\n        <form onSubmit={onSubmit}>\n          <Input name='email' placeholder='Enter login or email' ref={emailRef} />\n          <Input name='password' placeholder='Enter password' ref={PasswordRef} />\n\n          <Button disabled={isLoading}>\n            Login\n          </Button>\n        </form>\n\n        <section>\n          Not registered?&nbsp;\n          <Link to='/register'>Register</Link>\n        </section>\n      </section>\n    </section>\n  )\n};\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}